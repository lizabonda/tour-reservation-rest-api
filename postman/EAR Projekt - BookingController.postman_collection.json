{
	"info": {
		"_postman_id": "792b169f-69c7-4051-8842-e84efa6d43a9",
		"name": "EAR Projekt - BookingController",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "27696185"
	},
	"item": [
		{
			"name": "Scenario 1 - Customer booking flow (CUSTOMER)",
			"item": [
				{
					"name": "1.1 POST - Create booking",
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "password",
									"type": "string"
								},
								{
									"key": "username",
									"value": "customer",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "Accept",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"tour\": {\r\n        \"id\": 1\r\n    },\r\n    \"persons\": [\r\n        {\r\n            \"id\": 1\r\n        }\r\n    ],\r\n    \"reservations\": [\r\n        {\r\n            \"startDate\": \"2026-01-15\",\r\n            \"endDate\": \"2026-01-17\",\r\n            \"accommodation\": {\r\n                \"id\": 1\r\n            }\r\n        }\r\n    ]\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/bookings",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"bookings"
							]
						},
						"description": "Objective: Customer creates a valid booking.\n\nAuthorization: Requires CUSTOMER role.\n\nExpected result: 201 Created"
					},
					"response": []
				},
				{
					"name": "1.2 GET - Get booking by ID",
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "password",
									"type": "string"
								},
								{
									"key": "username",
									"value": "customer",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/bookings/1",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"bookings",
								"1"
							]
						},
						"description": "Objective: Retrieve an existing booking by its identifier.\n\nAuthorization: Requires CUSTOMER role.\n\nExpected result: 200 OK"
					},
					"response": []
				},
				{
					"name": "1.3 GET - Get bookings by date range",
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "password",
									"type": "string"
								},
								{
									"key": "username",
									"value": "customer",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/bookings?from=2026-01-01&to=2026-12-31",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"bookings"
							],
							"query": [
								{
									"key": "from",
									"value": "2026-01-01"
								},
								{
									"key": "to",
									"value": "2026-12-31"
								}
							]
						},
						"description": "Objective:  \nRetrieve all bookings within a given date range.\n\nAuthorization:  \nRequires CUSTOMER role.\n\nExpected result:  \n200 OK"
					},
					"response": []
				}
			],
			"description": "Demonstrates the basic customer booking flow.  \nA customer creates a booking and retrieves it using read-only operations.\n\nRole: CUSTOMER  \nCovered operations: CREATE, READ"
		},
		{
			"name": "Scenario 2 - Admin booking management (ADMIN)",
			"item": [
				{
					"name": "2.1 GET booking by id",
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "admin",
									"type": "string"
								},
								{
									"key": "password",
									"value": "admin",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/bookings/1",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"bookings",
								"1"
							]
						},
						"description": "Objective: Retrieve booking state before administrative update.\n\nAuthorization: Requires ADMIN role.\n\nExpected result: 200 OK"
					},
					"response": []
				},
				{
					"name": "2.2 PUT - update reservation accommodation",
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "admin",
									"type": "string"
								},
								{
									"key": "password",
									"value": "admin",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/bookings/reservations/1/accommodation/2",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"bookings",
								"reservations",
								"1",
								"accommodation",
								"2"
							]
						},
						"description": "Objective: Admin updates the accommodation assigned to a reservation.\n\nAuthorization: Requires ADMIN role.\n\nExpected result: 204 No Content"
					},
					"response": []
				},
				{
					"name": "2.3 GET booking by id (after update)",
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "admin",
									"type": "string"
								},
								{
									"key": "password",
									"value": "admin",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/bookings/1",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"bookings",
								"1"
							]
						},
						"description": "Objective: Verify that the administrative update was applied.\n\nAuthorization: Requires ADMIN role.\n\nExpected result: 200 OK"
					},
					"response": []
				},
				{
					"name": "2.4 DELETE - bookings by tour",
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "admin",
									"type": "string"
								},
								{
									"key": "password",
									"value": "admin",
									"type": "string"
								}
							]
						},
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/bookings/by-tour?destination=Greece&startDate=2026-01-15",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"bookings",
								"by-tour"
							],
							"query": [
								{
									"key": "destination",
									"value": "Greece"
								},
								{
									"key": "startDate",
									"value": "2026-01-15"
								}
							]
						},
						"description": "Objective: Admin removes all bookings for a given tour.\n\nAuthorization: Requires ADMIN role.\n\nExpected result: 204 No Content"
					},
					"response": []
				},
				{
					"name": "2.5 GET - bookings by date range (after delete)",
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "username",
									"value": "admin",
									"type": "string"
								},
								{
									"key": "password",
									"value": "admin",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/bookings?from=2026-01-01&to=2026-12-31",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"bookings"
							],
							"query": [
								{
									"key": "from",
									"value": "2026-01-01"
								},
								{
									"key": "to",
									"value": "2026-12-31"
								}
							]
						},
						"description": "Objective: Verify that bookings were removed.\n\nAuthorization: Requires ADMIN role.\n\nExpected result: 200 OK"
					},
					"response": []
				}
			],
			"description": "Demonstrates booking management by admin.  \nAn admin updates booking data and removes bookings, with state changes verified by reading before and after data update.\n\nRole: ADMIN  \nCovered operations: UPDATE, DELETE"
		},
		{
			"name": "Scenario 3 - Validation (CUSTOMER)",
			"item": [
				{
					"name": "3.1 POST - BOOKING id provided (400)",
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "password",
									"type": "string"
								},
								{
									"key": "username",
									"value": "customer",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "Accept",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n  \"id\": 123,\r\n  \"tour\": {\r\n    \"id\": 1\r\n  },\r\n  \"persons\": [\r\n    {\r\n      \"id\": 1\r\n    }\r\n  ],\r\n  \"reservations\": [\r\n    {\r\n      \"startDate\": \"2025-06-04\",\r\n      \"endDate\": \"2025-06-06\",\r\n      \"accommodation\": {\r\n        \"id\": 1\r\n      }\r\n    }\r\n  ]\r\n}\r\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/bookings",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"bookings"
							]
						},
						"description": "Objective: Verify that client-controlled booking IDs are rejected.\n\nAuthorization: Requires CUSTOMER role.\n\nExpected result: 400 Bad Request"
					},
					"response": []
				},
				{
					"name": "3.2 POST - Accommodation not available (409)",
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "password",
									"type": "string"
								},
								{
									"key": "username",
									"value": "customer",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "Accept",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"tour\": {\r\n        \"id\": 1\r\n    },\r\n    \"persons\": [\r\n        {\r\n            \"id\": 1\r\n        }\r\n    ],\r\n    \"reservations\": [\r\n        {\r\n            \"startDate\": \"2026-01-15\",\r\n            \"endDate\": \"2026-01-17\",\r\n            \"accommodation\": {\r\n                \"id\": 1\r\n            }\r\n        }\r\n    ]\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/bookings",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"bookings"
							]
						},
						"description": "Objective: Verify conflict handling when accommodation is unavailable.\n\nAuthorization: Requires CUSTOMER role.\n\nExpected result: 409 Conflict"
					},
					"response": []
				},
				{
					"name": "3.3 POST - Reservation price provided (400)",
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "password",
									"type": "string"
								},
								{
									"key": "username",
									"value": "customer",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "Accept",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"tour\": {\r\n        \"id\": 1\r\n    },\r\n    \"persons\": [\r\n        {\r\n            \"id\": 1\r\n        }\r\n    ],\r\n    \"reservations\": [\r\n        {\r\n            \"startDate\": \"2026-01-15\",\r\n            \"endDate\": \"2026-01-17\",\r\n            \"reservationPrice\": 999,\r\n            \"accommodation\": {\r\n                \"id\": 1\r\n            }\r\n        }\r\n    ]\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/bookings",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"bookings"
							]
						},
						"description": "Objective: Verify that client-provided reservation prices are rejected.\n\nAuthorization: Requires CUSTOMER role.\n\nExpected result: 400 Bad Request"
					},
					"response": []
				}
			],
			"description": "Demonstrates validation and business rule enforcement.  \nInvalid input data is rejected with appropriate HTTP error responses.\n\nRole: CUSTOMER  \nFocus: validation, conflicts, business constraints"
		},
		{
			"name": "Scenario 4 - Security",
			"item": [
				{
					"name": "4.1 POST booking as ADMIN (403)",
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "admin",
									"type": "string"
								},
								{
									"key": "username",
									"value": "admin",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"tour\": {\r\n        \"id\": 1\r\n    },\r\n    \"persons\": [\r\n        {\r\n            \"id\": 1\r\n        }\r\n    ],\r\n    \"reservations\": [\r\n        {\r\n            \"startDate\": \"2026-01-15\",\r\n            \"endDate\": \"2026-01-17\",\r\n            \"accommodation\": {\r\n                \"id\": 1\r\n            }\r\n        }\r\n    ]\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/bookings",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"bookings"
							]
						},
						"description": "Objective: Verify that admin is not allowed to create bookings.\n\nAuthorization: ADMIN role (insufficient for this operation).\n\nExpected result: 403 Forbidden"
					},
					"response": []
				},
				{
					"name": "4.2 DELETE booking as CUSTOMER (403)",
					"request": {
						"auth": {
							"type": "basic",
							"basic": [
								{
									"key": "password",
									"value": "password",
									"type": "string"
								},
								{
									"key": "username",
									"value": "customer",
									"type": "string"
								}
							]
						},
						"method": "DELETE",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							},
							{
								"key": "Accept",
								"value": "application/json",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/bookings/by-tour?destination=Greece&startDate=2026-01-15",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"bookings",
								"by-tour"
							],
							"query": [
								{
									"key": "destination",
									"value": "Greece"
								},
								{
									"key": "startDate",
									"value": "2026-01-15"
								}
							]
						},
						"description": "Objective: Verify that customer cannot perform administrative deletion.\n\nAuthorization: CUSTOMER role (insufficient).\n\nExpected result: 403 Forbidden"
					},
					"response": []
				},
				{
					"name": "4.3 GET booking without auth (401)",
					"request": {
						"auth": {
							"type": "noauth"
						},
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/bookings/1",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"bookings",
								"1"
							]
						},
						"description": "Objective: Verify that authentication is required.\n\nAuthorization: None.\n\nExpected result: 401 Unauthorized"
					},
					"response": []
				}
			],
			"description": "Demonstrates authentication and authorization rules.  \nRequests are intentionally executed with insufficient privileges.\n\nFocus: role-based access control"
		}
	],
	"variable": [
		{
			"key": "baseUrl",
			"value": "http://localhost:8080"
		}
	]
}